
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RamDev Shop - Sweets & Cakes</title>
    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #fffaf0;
        margin: 0;
        padding: 0;
        -webkit-tap-highlight-color: transparent;
      }
      #loader {
        position: fixed;
        inset: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: #fffaf0;
        z-index: 9999;
        transition: opacity 0.4s ease-out;
      }
      .spinner {
        width: 45px;
        height: 45px;
        border: 4px solid #fed7aa;
        border-top: 4px solid #ea580c;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
      
      h1, h2, h3 { font-family: 'Playfair Display', serif; }
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      
      .product-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      /* Smooth transitions for view switching */
      .fade-in {
        animation: fadeIn 0.3s ease-in-out;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
    </style>

    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@19.0.0",
    "react-dom/client": "https://esm.sh/react-dom@19.0.0/client",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
  </head>
  <body>
    <!-- Initial Loading Screen -->
    <div id="loader">
      <div class="spinner"></div>
      <p style="margin-top: 20px; font-weight: 700; color: #9a3412; font-family: 'Playfair Display', serif; font-size: 22px;">RamDev Shop</p>
      <p style="margin-top: 8px; font-size: 13px; color: #c2410c; opacity: 0.8; font-weight: 500;">Fresh & Delicious...</p>
    </div>

    <div id="root"></div>

    <!-- Consolidated Application Logic -->
    <script type="text/babel" data-type="module">
      import React, { useState, useMemo, useCallback, useEffect } from 'react';
      import ReactDOM from 'react-dom/client';

      /** --- CONSTANTS --- **/
      const SHOP_NAME = "RamDev Shop";
      const OWNER_WHATSAPP = "919867637326"; 
      const UPI_ID = "pawanponnam-1@okicici";

      const PRODUCTS = [
        {
          id: '1',
          name: 'Special Kaju Katli',
          description: 'Premium cashew fudge made with real silver leaf.',
          price: 450,
          category: 'Sweets',
          image: 'https://images.unsplash.com/photo-1599488615731-7e5c2823ff28?auto=format&fit=crop&q=80&w=400'
        },
        {
          id: '2',
          name: 'Motichoor Laddu',
          description: 'Traditional fine pearl gram flour balls cooked in pure ghee.',
          price: 320,
          category: 'Sweets',
          image: 'https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?auto=format&fit=crop&q=80&w=400'
        },
        {
          id: '3',
          name: 'Gulab Jamun',
          description: 'Soft milk-solid balls dipped in rose-scented syrup.',
          price: 280,
          category: 'Sweets',
          image: 'https://images.unsplash.com/photo-1548940740-204726a19be3?auto=format&fit=crop&q=80&w=400'
        },
        {
          id: '4',
          name: 'Chocolate Truffle Cake',
          description: 'Rich dark chocolate layers with silk ganache finish.',
          price: 650,
          category: 'Cakes',
          image: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?auto=format&fit=crop&q=80&w=400'
        },
        {
          id: '5',
          name: 'Butterscotch Delight',
          description: 'Vanilla sponge with crunchy butterscotch bits and caramel.',
          price: 550,
          category: 'Cakes',
          image: 'https://images.unsplash.com/photo-1558961363-fa8fdf82db35?auto=format&fit=crop&q=80&w=400'
        },
        {
          id: '6',
          name: 'Rasmalai Cake',
          description: 'Fusion cake flavored with saffron, cardamom and nuts.',
          price: 750,
          category: 'Cakes',
          image: 'https://images.unsplash.com/photo-1621303837174-89787a7d4729?auto=format&fit=crop&q=80&w=400'
        },
        {
          id: '7',
          name: 'Gajar Ka Halwa',
          description: 'Slow-cooked carrot pudding with milk and dry fruits.',
          price: 350,
          category: 'Sweets',
          image: 'https://images.unsplash.com/photo-1589113103503-1222149ba1c7?auto=format&fit=crop&q=80&w=400'
        }
      ];

      /** --- COMPONENTS --- **/

      const Header = ({ cartCount, onOpenCart }) => (
        <header className="fixed top-0 left-0 right-0 max-w-md mx-auto z-50 bg-white shadow-sm px-4 py-3 flex items-center justify-between border-b border-orange-50">
          <div className="flex items-center gap-2">
            <div className="w-9 h-9 bg-orange-600 rounded-lg flex items-center justify-center text-white shadow-sm">
              <i className="fas fa-store text-lg"></i>
            </div>
            <div>
              <h1 className="text-lg font-black text-gray-900 leading-none tracking-tight">{SHOP_NAME}</h1>
              <p className="text-[9px] text-orange-600 font-bold uppercase tracking-widest">Premium Confectionery</p>
            </div>
          </div>
          <button onClick={onOpenCart} className="relative w-10 h-10 flex items-center justify-center text-gray-700 active:scale-90 transition-transform">
            <i className="fas fa-shopping-basket text-xl"></i>
            {cartCount > 0 && (
              <span className="absolute top-0 right-0 bg-red-600 text-white text-[10px] font-black min-w-[18px] h-[18px] px-1 rounded-full flex items-center justify-center border-2 border-white">
                {cartCount}
              </span>
            )}
          </button>
        </header>
      );

      const ProductCard = ({ product, onAdd, onQuickBuy }) => (
        <div className="bg-white rounded-2xl overflow-hidden shadow-sm border border-orange-50 flex flex-col h-full active:scale-[0.98] transition-transform">
          <div className="relative h-36">
            <img src={product.image} alt={product.name} className="w-full h-full object-cover" />
            <div className="absolute top-2 right-2">
              <span className="bg-white/95 backdrop-blur px-2 py-1 rounded-lg text-[9px] font-black text-orange-800 shadow-sm uppercase">{product.category}</span>
            </div>
          </div>
          <div className="p-3 flex flex-col flex-1">
            <h3 className="text-sm font-bold text-gray-900 mb-1 line-clamp-1">{product.name}</h3>
            <p className="text-[10px] text-gray-500 line-clamp-2 mb-3 flex-1">{product.description}</p>
            <div className="mt-auto">
              <div className="flex items-center justify-between mb-2">
                <span className="text-sm font-black text-orange-600">â‚¹{product.price}</span>
                <button onClick={() => onAdd(product)} className="w-8 h-8 rounded-lg bg-orange-50 text-orange-600 flex items-center justify-center"><i className="fas fa-plus text-xs"></i></button>
              </div>
              <button onClick={() => onQuickBuy(product)} className="w-full bg-orange-600 text-white text-[10px] font-black py-2.5 rounded-xl uppercase tracking-wider shadow-md shadow-orange-100">ORDER NOW</button>
            </div>
          </div>
        </div>
      );

      const CartView = ({ cart, total, onUpdate, onRemove, onBack, onCheckout }) => (
        <div className="p-4 pt-16 min-h-screen bg-white fade-in">
          <div className="flex items-center gap-4 mb-8">
            <button onClick={onBack} className="w-10 h-10 flex items-center justify-center rounded-full bg-gray-50"><i className="fas fa-arrow-left"></i></button>
            <h2 className="text-2xl font-black text-gray-900">Your Cart</h2>
          </div>
          
          {cart.length === 0 ? (
            <div className="py-20 text-center">
              <i className="fas fa-shopping-bag text-5xl text-gray-100 mb-4"></i>
              <p className="text-gray-400 font-medium">Your cart is empty</p>
            </div>
          ) : (
            <div className="space-y-4 mb-40">
              {cart.map(item => (
                <div key={item.id} className="flex gap-4 p-3 bg-orange-50/40 rounded-2xl border border-orange-100/50">
                  <img src={item.image} className="w-20 h-20 object-cover rounded-xl shadow-sm" />
                  <div className="flex-1">
                    <h4 className="font-bold text-sm text-gray-900">{item.name}</h4>
                    <p className="text-orange-600 font-black text-sm">â‚¹{item.price * item.quantity}</p>
                    <div className="flex items-center gap-3 mt-2">
                      <button onClick={() => onUpdate(item.id, -1)} className="w-7 h-7 bg-white rounded-lg border border-orange-200 text-xs">-</button>
                      <span className="font-bold text-xs">{item.quantity}</span>
                      <button onClick={() => onUpdate(item.id, 1)} className="w-7 h-7 bg-white rounded-lg border border-orange-200 text-xs">+</button>
                    </div>
                  </div>
                  <button onClick={() => onRemove(item.id)} className="text-gray-300 p-2"><i className="fas fa-times text-xs"></i></button>
                </div>
              ))}
            </div>
          )}

          {cart.length > 0 && (
            <div className="fixed bottom-0 left-0 right-0 max-w-md mx-auto p-6 bg-white border-t rounded-t-[32px] shadow-2xl">
              <div className="flex justify-between items-end mb-6">
                <div>
                  <p className="text-[10px] font-black text-gray-400 uppercase tracking-widest">Grand Total</p>
                  <p className="text-3xl font-black text-orange-900">â‚¹{total}</p>
                </div>
                <p className="text-[10px] font-bold text-orange-600 bg-orange-50 px-3 py-1 rounded-full uppercase">{cart.length} items</p>
              </div>
              <button onClick={onCheckout} className="w-full bg-orange-600 text-white font-black py-4 rounded-2xl shadow-xl flex items-center justify-center gap-3">PROCEED TO CHECKOUT <i className="fas fa-chevron-right text-xs"></i></button>
            </div>
          )}
        </div>
      );

      const CheckoutView = ({ total, onSubmit, onBack }) => {
        const [step, setStep] = useState(1);
        const [form, setForm] = useState({ fullName: '', phone: '', address: '', delivery: 'home', payment: 'cod' });
        
        const isValid = form.fullName && form.phone.length >= 10 && form.address;
        const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(`upi://pay?pa=${UPI_ID}&pn=${encodeURIComponent(SHOP_NAME)}&am=${total}&cu=INR`)}`;

        return (
          <div className="p-4 pt-16 min-h-screen bg-white fade-in text-left">
            <div className="flex items-center gap-4 mb-10">
              <button onClick={step === 1 ? onBack : () => setStep(1)} className="w-10 h-10 flex items-center justify-center rounded-full bg-gray-50"><i className="fas fa-arrow-left"></i></button>
              <h2 className="text-2xl font-black text-gray-900">Checkout</h2>
            </div>

            {step === 1 ? (
              <div className="space-y-5">
                <div className="space-y-4">
                  <input className="w-full p-4 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-orange-500" placeholder="Full Name" value={form.fullName} onChange={e => setForm({...form, fullName: e.target.value})} />
                  <input className="w-full p-4 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-orange-500" placeholder="WhatsApp Number" type="tel" value={form.phone} onChange={e => setForm({...form, phone: e.target.value})} />
                  <textarea className="w-full p-4 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-orange-500" placeholder="Delivery Address" rows="3" value={form.address} onChange={e => setForm({...form, address: e.target.value})} />
                </div>
                <div className="grid grid-cols-2 gap-3">
                  <button onClick={() => setForm({...form, delivery: 'home'})} className={`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 ${form.delivery === 'home' ? 'border-orange-500 bg-orange-50 text-orange-900' : 'border-transparent bg-gray-50 text-gray-400'}`}>
                    <i className="fas fa-truck"></i><span className="text-[10px] font-black uppercase">Delivery</span>
                  </button>
                  <button onClick={() => setForm({...form, delivery: 'pickup'})} className={`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 ${form.delivery === 'pickup' ? 'border-orange-500 bg-orange-50 text-orange-900' : 'border-transparent bg-gray-50 text-gray-400'}`}>
                    <i className="fas fa-store"></i><span className="text-[10px] font-black uppercase">Pickup</span>
                  </button>
                </div>
                <button disabled={!isValid} onClick={() => setStep(2)} className={`w-full py-4 rounded-2xl font-black shadow-lg ${isValid ? 'bg-orange-600 text-white' : 'bg-gray-100 text-gray-300'}`}>CONTINUE TO PAYMENT</button>
              </div>
            ) : (
              <div className="space-y-6">
                <div className="space-y-3">
                  <button onClick={() => setForm({...form, payment: 'qr'})} className={`w-full p-5 rounded-2xl border-2 flex items-center gap-4 ${form.payment === 'qr' ? 'border-orange-500 bg-orange-50' : 'border-transparent bg-gray-50'}`}>
                    <div className="w-10 h-10 bg-white rounded-lg flex items-center justify-center text-orange-600 shadow-sm"><i className="fas fa-qrcode"></i></div>
                    <div className="text-left"><p className="font-black text-sm">UPI Scan & Pay</p><p className="text-[10px] text-gray-400 font-bold uppercase">Auto-fills â‚¹{total}</p></div>
                  </button>
                  <button onClick={() => setForm({...form, payment: 'cod'})} className={`w-full p-5 rounded-2xl border-2 flex items-center gap-4 ${form.payment === 'cod' ? 'border-orange-500 bg-orange-50' : 'border-transparent bg-gray-50'}`}>
                    <div className="w-10 h-10 bg-white rounded-lg flex items-center justify-center text-gray-400 shadow-sm"><i className="fas fa-money-bill-wave"></i></div>
                    <div className="text-left"><p className="font-black text-sm text-gray-900">Cash on Delivery</p><p className="text-[10px] text-gray-400 font-bold uppercase">Pay at your doorstep</p></div>
                  </button>
                </div>
                {form.payment === 'qr' && (
                  <div className="bg-white p-6 rounded-3xl border border-dashed border-orange-200 text-center shadow-sm">
                    <p className="text-[10px] font-black text-orange-900 mb-4 uppercase tracking-widest">Total to Pay: â‚¹{total}</p>
                    <img src={qrUrl} className="mx-auto w-40 h-40 mb-4 rounded-xl border-4 border-white shadow-lg" />
                    <p className="text-[10px] text-orange-700 font-bold bg-orange-50 py-2 rounded-lg">Scan with GPay, PhonePe or Paytm</p>
                  </div>
                )}
                <button onClick={() => onSubmit(form)} className="w-full bg-green-600 text-white py-5 rounded-2xl font-black shadow-xl flex items-center justify-center gap-3">
                  <i className="fab fa-whatsapp text-xl"></i> COMPLETE ON WHATSAPP
                </button>
              </div>
            )}
          </div>
        );
      };

      /** --- MAIN APP --- **/

      const App = () => {
        const [view, setView] = useState('catalog');
        const [cart, setCart] = useState([]);
        const [category, setCategory] = useState('All');
        const [orderData, setOrderData] = useState(null);

        const cartTotal = useMemo(() => cart.reduce((s, i) => s + i.price * i.quantity, 0), [cart]);
        const cartCount = useMemo(() => cart.reduce((a, b) => a + b.quantity, 0), [cart]);

        const addToCart = useCallback((p) => {
          setCart(prev => {
            const exists = prev.find(i => i.id === p.id);
            if (exists) return prev.map(i => i.id === p.id ? {...i, quantity: i.quantity + 1} : i);
            return [...prev, {...p, quantity: 1}];
          });
        }, []);

        const updateQty = useCallback((id, d) => {
          setCart(prev => prev.map(i => i.id === id ? {...i, quantity: Math.max(1, i.quantity + d)} : i));
        }, []);

        const removeFromCart = useCallback((id) => setCart(prev => prev.filter(i => i.id !== id)), []);

        const handleFinalOrder = (details) => {
          const itemsText = cart.map(i => `â€¢ ${i.name} (${i.quantity}x) - â‚¹${i.price * i.quantity}`).join('\n');
          const message = `ðŸ›ï¸ *NEW ORDER: ${SHOP_NAME}*\nðŸ‘¤ *Customer:* ${details.fullName}\nðŸ“ž *Phone:* ${details.phone}\nðŸ“ *Address:* ${details.address}\nðŸšš *Method:* ${details.delivery}\nðŸ’³ *Payment:* ${details.payment === 'qr' ? 'UPI' : 'COD'}\n\nðŸ° *Items:*\n${itemsText}\n\nðŸ’° *TOTAL: â‚¹${cartTotal}*`;
          window.open(`https://wa.me/${OWNER_WHATSAPP}?text=${encodeURIComponent(message)}`, '_blank');
          setCart([]);
          setView('catalog');
        };

        useEffect(() => {
          // Check if React has rendered anything yet to hide the external loader
          const rootDiv = document.querySelector('#root > div');
          if (rootDiv) {
            const loader = document.getElementById('loader');
            if (loader) {
              loader.style.opacity = '0';
              setTimeout(() => loader.remove(), 400);
            }
          }
        });

        if (view === 'cart') return <CartView cart={cart} total={cartTotal} onUpdate={updateQty} onRemove={removeFromCart} onBack={() => setView('catalog')} onCheckout={() => setView('checkout')} />;
        if (view === 'checkout') return <CheckoutView total={cartTotal} onBack={() => setView('cart')} onSubmit={handleFinalOrder} />;

        const filtered = category === 'All' ? PRODUCTS : PRODUCTS.filter(p => p.category === category);

        return (
          <div className="min-h-screen flex flex-col max-w-md mx-auto bg-[#fffaf0] relative">
            <Header cartCount={cartCount} onOpenCart={() => setView('cart')} />
            
            <main className="flex-1 pt-20 pb-28 px-4 fade-in">
              <div className="flex gap-2 mb-6 overflow-x-auto no-scrollbar py-2">
                {['All', 'Sweets', 'Cakes', 'Snacks'].map(cat => (
                  <button 
                    key={cat} 
                    onClick={() => setCategory(cat)}
                    className={`px-5 py-2 rounded-full text-[11px] font-black uppercase tracking-widest shadow-sm transition-all whitespace-nowrap ${category === cat ? 'bg-orange-600 text-white' : 'bg-white text-orange-900 border border-orange-100'}`}
                  >
                    {cat}
                  </button>
                ))}
              </div>

              <div className="product-grid">
                {filtered.map(p => <ProductCard key={p.id} product={p} onAdd={addToCart} onQuickBuy={(p) => { addToCart(p); setView('cart'); }} />)}
              </div>
            </main>

            {cart.length > 0 && (
              <div className="fixed bottom-6 left-4 right-4 z-40 max-w-[calc(448px-2rem)] mx-auto">
                <button 
                  onClick={() => setView('cart')}
                  className="w-full bg-orange-600 text-white font-black py-4 rounded-2xl shadow-2xl flex justify-between px-6 items-center border-4 border-white/20 active:scale-[0.97] transition-transform"
                >
                  <span className="flex items-center gap-2"><i className="fas fa-shopping-basket"></i> {cartCount} Items</span>
                  <span>â‚¹{cartTotal} <i className="fas fa-chevron-right ml-1 text-[10px]"></i></span>
                </button>
              </div>
            )}
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>
